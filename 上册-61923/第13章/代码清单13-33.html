<!DOCTYPE html>   
<head>   
<meta charset="UTF-8">  
<title>使用toBlob方法转换canvas元素</title>  
</head>  
<body onload="draw('canvas');">  
<h1>使用toBlob方法转换canvas元素</h1>  
<canvas id="canvas" width="400" height="300"></canvas> <br/>
<input type="button" value="保存图像" onclick="savePicture();">
<script>
function draw(id)
{  
    let canvas = document.getElementById(id);  
    if (canvas == null)  
        return false;  
    let context = canvas.getContext('2d'); 
    context.fillStyle = "rgb(0, 0, 255)";
    context.fillRect(0, 0, canvas.width, canvas.height);
    context.fillStyle = "rgb(255, 255, 0)";
    context.fillRect(10, 20, 50, 50); 	
}
function savePicture(){
    function onBlob (blob) {
        let a = document.createElement('a');
        a.textContent = '打开图像';
        document.body.appendChild(a);
        a.style.display = 'block';
        a.href = window.URL.createObjectURL(blob);
    }
    canvas.toBlob(onBlob,'image/jpeg', 0.95);
}
</script>
</body>  
</html>
